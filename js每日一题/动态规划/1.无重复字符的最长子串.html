<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 给定一个字符串 s ，请你找出其中不含有重复字符的 最长子串 的长度。
        // 输入: s = "abcabcbb"
        // 输出: 3 
        // 解释: 因为无重复字符的最长子串是 "abc"，所以其长度为 3。

        // 时空复杂度很高，需要优化
        let s = "abcabcbb"
            // let s = 'aaaaaaaaa'
            // var lengthOfLongestSubstring = function(s) {
            //     if (!s) {
            //         return
            //     }
            //     if (s.length == 1) {
            //         return s.length
            //     }
            //     let max = 0;
            //     for (let left = 0; left < s.length - 1; left++) {
            //         let map = new Map()
            //         map.set(s[left], left)
            //         for (let right = left + 1; right < s.length; right++) {
            //             if (map.has(s[right])) {
            //                 // console.log('map.size', map.size, max)
            //                 max = Math.max(max, map.size)
            //                 break
            //             }
            //             map.set(s[right], right)
            //             if (right == s.length - 1) {
            //                 max = Math.max(max, map.size)
            //             }
            //         }
            //     }
            //     return max
            // };

        // 方法二：最优解
        // var lengthOfLongestSubstring = function(s) {
        //     let last = new Array(128) //ascii码的数量
        //     for (let i = 0; i < 128; i++) {
        //         last[i] = -1
        //     }
        //     //窗口开始位置
        //     let start = 0
        //         // 结果
        //     let result = 0
        //     for (let i = 0; i < s.length; i++) {
        //         let index = s.charCodeAt(i) // a b c a b c b b
        //             // last[index]代表上一次出现的位置，但是字符串内字符不能重复，所以要从上一次出现位置的下一个位置开始
        //         start = Math.max(start, last[index] + 1)
        //         result = Math.max(result, i - start + 1)
        //         last[index] = i
        //     }
        //     return result
        // };

        // 方法三：优化方法一
        var lengthOfLongestSubstring = function(s) {
            let res = 0
            let map = new Map()
            for (let left = 0, right = 0; right < s.length; right++) {
                if (map.has(s[right])) {
                    // left = Math.max(map.get(s[right]) + 1, left)
                    left = map.get(s[right]) + 1
                }
                res = Math.max(res, right - left + 1)
                map.set(s[right], right)
            }
            return res
        }
        console.log(lengthOfLongestSubstring(s))
    </script>
</body>

</html>